# Template file for 'vala-panel'
pkgname=vala-panel
version=24.05
revision=1
build_style=meson
build_helper=gir
hostmakedepends="vala pkg-config gettext glib-devel"
makedepends="gtk+3-devel libwnck-devel gobject-introspection
 $(vopt_if wayland gtk-layer-shell-devel)"
short_desc="GTK+3 desktop panel forked from LXPanel"
maintainer="Joshua Kr√§mer <joshua@kraemer.link>"
license="LGPL-3.0-or-later"
homepage="https://gitlab.com/vala-panel-project/vala-panel"
distfiles="https://gitlab.com/vala-panel-project/vala-panel/-/archive/${version}/vala-panel-${version}.tar.bz2"
checksum=adde420a1f3edd7fec947b06482ff3f2e65a7e1568bd0b0bd1ba39a051fbbdb5

# Package build options
build_options="x11 wayland"
build_options_default="x11 wayland"
if [ "$build_option_x11" -a "$build_option_wayland" ]; then
	configure_args="-Dplatforms=x11,wayland"
elif [ "$build_option_x11" ]; then
	configure_args="-Dplatforms=x11"
elif [ "$build_option_wayland" ]; then
	configure_args="-Dplatforms=wayland"
fi

vala-panel-devel_package() {
	short_desc+=" - development files"
	depends="vala-panel>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove usr/share/vala
	}
}
